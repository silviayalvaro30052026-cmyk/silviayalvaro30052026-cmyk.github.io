<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Asistencia — Silvia & Álvaro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Confirma tu asistencia a la boda de Silvia & Álvaro." />

  <!-- Misma fuente que el resto del sitio -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles.css" />

  <style>
    /* Estilos de formulario compatibles con styles.css */
    .rsvp-form { display:block; width:100%; }
    .form-row { display:flex; gap:1rem; margin:0.5rem 0 1rem; align-items:center; flex-wrap:wrap; }
    .form-row .field { flex:1 1 220px; min-width:180px; }
    label { display:block; font-weight:600; margin-bottom:0.35rem; color: inherit; }
    input[type="text"], select, textarea {
      width:100%; padding:0.6rem 0.75rem; border-radius:8px; border:1px solid rgba(0,0,0,0.12);
      background: rgba(255,255,255,0.96); font-family: inherit; font-size: 1rem; color: inherit;
      box-sizing: border-box;
    }
    textarea { min-height: 100px; resize: vertical; }
    fieldset { border: 0; padding: 0; margin: 0 0 1rem 0; }
    .choices { display:flex; gap:0.6rem; flex-wrap:wrap; align-items:center; }
    .choice-label {
      display:inline-flex; align-items:center; gap:0.45rem; padding:0.35rem 0.6rem;
      border-radius:8px; background: rgba(255,255,255,0.72); cursor: pointer; font-weight:600; color: #0b3d2e;
    }
    input[type="radio"], input[type="checkbox"] { accent-color: var(--brand-green); }
    .form-actions { margin-top: 0.75rem; display:flex; gap:0.6rem; align-items:center; justify-content:flex-start; }
    .form-note { font-size:0.95rem; color: rgba(11,61,46,0.8); }
    .is-hidden { display:none !important; }
    .rsvp-success {
      margin-top:1rem; padding:0.9rem 1rem; border-radius:8px; background: rgba(42,157,143,0.12);
      color: var(--brand-green-dark); font-weight:600;
    }
    @media (max-width:640px) {
      .form-row { gap:0.5rem; }
      .form-row .field { flex:1 1 100%; min-width:0; }
    }
  </style>
</head>
<body class="evento-page">

  <nav class="top-nav" aria-label="Navegación de la boda">
    <div class="nav-controls">
      <button id="sectionsToggle" class="nav-toggle" aria-expanded="false" aria-controls="navDropdown" aria-label="Abrir menú de secciones">
        <span class="sr-only">Abrir menú de secciones</span>
        <span class="hamburger" aria-hidden="true">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>

    <ul id="navDropdown" class="nav-list nav-dropdown" role="menu" hidden>
      <li role="none"><a role="menuitem" href="index.html" class="nav-btn">Inicio</a></li>
      <li role="none"><a role="menuitem" href="evento.html" class="nav-btn">Evento</a></li>
      <li role="none"><span class="nav-current" aria-current="page">Asistencia</span></li>
      <li role="none"><a role="menuitem" href="alojamiento.html" class="nav-btn">Alojamiento</a></li>
      <li role="none"><a role="menuitem" href="regalo.html" class="nav-btn">Regalo</a></li>
    </ul>
  </nav>

  <main id="main" class="section" role="main">
    <h1>Confirmar asistencia</h1>

    <section class="card" aria-labelledby="asistencia-heading">
      <h2 id="asistencia-heading" style="margin-top:0;">Formulario de asistencia</h2>

      <!-- FORM: enviado a Formspree -->
      <form id="rsvpForm" class="rsvp-form" method="POST"
            action="https://formspree.io/f/mdaankgw">
        <!-- Hidden fields para Formspree -->
        <input type="hidden" name="_subject" value="RSVP Silvia & Álvaro">
        <!-- Opcional: redirigir a gracias.html después del envío. Si no tienes gracias.html, elimina o deja vacio -->
        <!-- <input type="hidden" name="_next" value="https://tusitio.com/gracias.html"> -->
        <!-- Honeypot anti-spam (Formspree ignora si está relleno) -->
        <input type="text" name="_gotcha" style="display:none">

        <!-- 1. ¿Asistirás? -->
        <fieldset aria-labelledby="asistiras-legend">
          <legend id="asistiras-legend" style="font-weight:700;margin-bottom:0.5rem;">¿Asistirás a la boda?</legend>
          <div class="choices" role="radiogroup" aria-labelledby="asistiras-legend">
            <label class="choice-label">
              <input type="radio" name="attendance" value="si-solo" required> Sí, yo solo/a
            </label>

            <label class="choice-label">
              <input type="radio" name="attendance" value="si-acompanante"> Sí, con acompañante
            </label>

            <label class="choice-label">
              <input type="radio" name="attendance" value="no"> No
            </label>
          </div>
        </fieldset>

        <!-- 2. ¿Quién eres? -->
        <fieldset>
          <legend style="font-weight:700;margin-bottom:0.5rem;">¿Quién eres?</legend>
          <div class="form-row">
            <div class="field">
              <label for="firstName">Nombre</label>
              <input id="firstName" name="firstName" type="text" placeholder="Nombre" required>
            </div>
            <div class="field">
              <label for="lastName">Apellido</label>
              <input id="lastName" name="lastName" type="text" placeholder="Apellido" required>
            </div>
          </div>
        </fieldset>

        <!-- 3. ¿Quién es tu acompañante? (solo si trae acompañante) -->
        <fieldset id="acompanante-fieldset" class="is-hidden" aria-hidden="true">
          <legend style="font-weight:700;margin-bottom:0.5rem;">¿Quién es tu acompañante?</legend>
          <div class="form-row">
            <div class="field">
              <label for="compFirst">Nombre</label>
              <input id="compFirst" name="compFirst" type="text" placeholder="Nombre del acompañante">
            </div>
            <div class="field">
              <label for="compLast">Apellido</label>
              <input id="compLast" name="compLast" type="text" placeholder="Apellido del acompañante">
            </div>
          </div>
        </fieldset>

        <!-- 4. Dieta -->
        <fieldset>
          <legend style="font-weight:700;margin-bottom:0.5rem;">¿Sigues alguna dieta especial?</legend>
          <div class="form-row">
            <div class="field">
              <label for="diet">Selecciona</label>
              <select id="diet" name="diet">
                <option value="no">No</option>
                <option value="vegetariana">Vegetariana</option>
                <option value="vegetariana-pescado">Vegetariana (como pescado)</option>
                <option value="vegana">Vegana</option>
              </select>
            </div>
          </div>
        </fieldset>

        <!-- 5. Intolerancias / alergias -->
        <fieldset>
          <legend style="font-weight:700;margin-bottom:0.5rem;">¿Alguna intolerancia o alergia?</legend>
          <div class="form-row">
            <div class="field" style="flex:1 1 100%;">
              <label for="allergies" class="form-note">Indica aquí si tienes alguna intolerancia o alergia</label>
              <textarea id="allergies" name="allergies" placeholder="Escribe aquí intolerancias o alergias…"></textarea>
            </div>
          </div>
        </fieldset>

        <!-- 6. Preboda -->
        <fieldset aria-labelledby="preboda-legend">
          <legend id="preboda-legend" style="font-weight:700;margin-bottom:0.5rem;">¿Vendrás a la preboda?</legend>
          <div class="choices" role="radiogroup" aria-labelledby="preboda-legend">
            <label class="choice-label">
              <input type="radio" name="preboda" value="si"> Sí
            </label>
            <label class="choice-label">
              <input type="radio" name="preboda" value="no" checked> No
            </label>
          </div>
        </fieldset>

        <!-- 7. Algo más que debamos saber -->
        <fieldset>
          <legend style="font-weight:700;margin-bottom:0.5rem;">¿Algo más que debamos saber?</legend>
          <div class="form-row">
            <div class="field" style="flex:1 1 100%;">
              <label for="notes" class="form-note">Comentarios adicionales (transporte, horarios, etc.)</label>
              <textarea id="notes" name="notes" placeholder="Escribe aquí…"></textarea>
            </div>
          </div>
        </fieldset>

        <div class="form-actions">
          <button type="submit" class="btn-primary">Enviar respuesta</button>
          <div id="formStatus" role="status" aria-live="polite" style="margin-left:0.6rem;"></div>
        </div>
      </form>
    </section>
  </main>

  <footer class="footer" role="contentinfo">Álvaro & Silvia · 30/05/2026</footer>

  <script>
    (function () {
      // NAV TOGGLE
      const toggle = document.getElementById('sectionsToggle');
      const dropdown = document.getElementById('navDropdown');
      function openMenu() { dropdown.hidden = false; toggle.setAttribute('aria-expanded', 'true'); dropdown.classList.add('show'); }
      function closeMenu() { dropdown.hidden = true; toggle.setAttribute('aria-expanded', 'false'); dropdown.classList.remove('show'); }
      function toggleMenu() { if (dropdown.hidden) openMenu(); else closeMenu(); }
      toggle.addEventListener('click', function (e) { e.stopPropagation(); toggleMenu(); if (!dropdown.hidden) { const first = dropdown.querySelector('[role="menuitem"]'); if (first) first.focus(); }});
      document.addEventListener('keydown', function (e) { if (e.key === 'Escape') closeMenu(); });
      document.addEventListener('click', function (e) { if (!dropdown.contains(e.target) && e.target !== toggle) closeMenu(); });
      dropdown.addEventListener('click', function (e) { const target = e.target.closest('[role="menuitem"]'); if (target) closeMenu(); });

      // FORM: mostrar/ocultar campos de acompañante
      const form = document.getElementById('rsvpForm');
      const attendanceRadios = Array.from(form.elements['attendance'] || []);
      const companionFieldset = document.getElementById('acompanante-fieldset');
      const compFirst = document.getElementById('compFirst');
      const compLast = document.getElementById('compLast');

      function updateCompanionVisibility() {
        const value = attendanceRadios.find(r => r.checked)?.value;
        if (value === 'si-acompanante') {
          companionFieldset.classList.remove('is-hidden');
          companionFieldset.setAttribute('aria-hidden', 'false');
          compFirst.required = true;
          compLast.required = true;
        } else {
          companionFieldset.classList.add('is-hidden');
          companionFieldset.setAttribute('aria-hidden', 'true');
          compFirst.required = false;
          compLast.required = false;
        }
      }

      // inicializar y escuchar cambios
      updateCompanionVisibility();
      attendanceRadios.forEach(r => r.addEventListener('change', updateCompanionVisibility));

      // NOTA: no interceptamos el submit; el formulario se envía directamente a Formspree.
      // Si quieres mostrar un mensaje en la misma página tras enviar sin redirigir,
      // podemos implementar el envío via fetch()/AJAX. Dime si lo quieres.
    })();
  </script>
</body>
</html>
