<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Alojamiento ‚Äî Silvia & √Ålvaro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Opciones de alojamiento para invitados: hoteles, casas rurales y contactos. Informaci√≥n de distancia y reservas." />

  <!-- Misma fuente que el resto del sitio -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Peque√±os estilos locales para el formulario de alojamiento */
    .lodging-form { display:block; width:100%; }
    .option-prices { margin-top: 0.45rem; color: rgba(11,61,46,0.9); font-weight:600; }
    .supplements { display:flex; gap:0.8rem; flex-wrap:wrap; margin-top:0.5rem; }
    .supplement-label { display:inline-flex; align-items:center; gap:0.45rem; padding:0.28rem 0.45rem; border-radius:8px; background: rgba(255,255,255,0.86); color: inherit; }
    .price-summary { margin-top:0.6rem; font-weight:700; color: var(--brand-green-dark); }
    .is-hidden { display:none !important; }
    textarea[name="comments"] { min-height:100px; width:100%; padding:0.6rem; border-radius:8px; border:1px solid rgba(0,0,0,0.12); box-sizing:border-box; background: rgba(255,255,255,0.96); font-family: inherit; }
  </style>
</head>
<body class="evento-page">

  <!-- Navegaci√≥n (igual que en las otras p√°ginas) -->
  <nav class="top-nav" role="navigation" aria-label="Navegaci√≥n de la boda">
    <ul class="nav-list" role="menubar" aria-label="Secciones">
      <li role="none"><a role="menuitem" class="nav-btn" href="index.html">Inicio</a></li>
      <li role="none"><a role="menuitem" class="nav-btn" href="evento.html">Evento</a></li>
      <li role="none"><a role="menuitem" class="nav-btn" href="asistencia.html">Asistencia</a></li>
      <li role="none"><span class="nav-current" aria-current="page">Alojamiento</span></li>
      <li role="none"><a role="menuitem" class="nav-btn" href="regalo.html">Regalo</a></li>
    </ul>
  </nav>

  <main id="main" class="section" role="main">
    <h1>Alojamiento</h1>

    <section class="card" aria-labelledby="intro-heading">
      <h2 id="intro-heading" style="margin-top:0;">Opciones cercanas</h2>
      <p style="margin-top:0.4rem;">
        Hemos seleccionado varias opciones de alojamiento cerca del lugar de celebraci√≥n. Si necesit√°is ayuda con reservas o transporte, escribidnos en el formulario.
      </p>
    </section>

    <!-- Reserva exclusiva + formulario de preferencia -->
    <section class="card" aria-labelledby="hotel-info-heading">
      <div class="section-media" style="align-items:flex-start;">
        <img src="img/Banquete.png" alt="Hotel Iz√°n Puerta de Gredos" loading="lazy" width="72" height="72">
        <div class="heading-wrap">
          <h2 id="hotel-info-heading">Hotel reservado para invitados</h2>
        </div>
      </div>

      <div class="card-body">
        <p style="margin-top:0.4rem;">
          El hotel estar√° reservado en exclusiva para los invitados de la boda.
          Por favor, indicad a continuaci√≥n si vais a alojaros en el hotel y qu√© opci√≥n prefer√≠s.
        </p>

        <!-- Formulario: env√≠a a Formspree (opcional: cambia action si prefieres otro endpoint) -->
        <form id="lodgingForm" class="lodging-form" method="POST" action="https://formspree.io/f/mdaankgw" novalidate>
          <input type="hidden" name="_subject" value="Alojamiento ‚Äî Silvia & √Ålvaro">
          <!-- Honeypot anti-spam -->
          <input type="text" name="_gotcha" style="display:none" aria-hidden="true">

          <!-- ¬øTe alojar√°s en el hotel? -->
          <fieldset>
            <legend style="font-weight:700;margin-bottom:0.5rem;">¬øTe alojar√°s en el hotel?</legend>
            <div class="choices" role="radiogroup" aria-labelledby="">
              <label class="choice-label">
                <input type="radio" name="willStay" value="si" required> S√≠
              </label>
              <label class="choice-label">
                <input type="radio" name="willStay" value="no"> No
              </label>
            </div>
          </fieldset>

          <!-- Opciones de alojamiento (depende de willStay) -->
          <fieldset id="roomOptions" class="is-hidden" aria-hidden="true">
            <legend style="font-weight:700;margin-bottom:0.5rem;">Opciones de alojamiento</legend>

            <!-- Habitaci√≥n doble -->
            <div style="margin-bottom:0.6rem;">
              <div style="display:flex;align-items:center;gap:0.75rem;">
                <div style="flex:0 0 auto;">
                  <strong>üõè Habitaci√≥n doble (2 personas)</strong>
                </div>
                <div style="flex:1 1 auto;"></div>
              </div>

              <div class="choices" style="margin-top:0.5rem;">
                <label class="choice-label">
                  <input type="radio" name="roomType" value="double" checked> Seleccionar habitaci√≥n doble
                </label>
              </div>

              <div style="margin-top:0.5rem;">
                <div class="option-prices">
                  <div><strong>2 noches (viernes a domingo)</strong> ‚Äî Precio total por habitaci√≥n: 187 ‚Ç¨ (Precio por persona y noche: 46,75 ‚Ç¨)</div>
                  <div style="margin-top:0.25rem;"><strong>1 noche</strong> ‚Äî Precio total por habitaci√≥n: 95,50 ‚Ç¨ (Precio por persona y noche: 47,75 ‚Ç¨)</div>
                </div>

                <div style="margin-top:0.5rem;" aria-hidden="true">
                  <label class="choice-label" style="font-weight:600;">
                    <input type="radio" name="double_nights" value="2n" checked> 2 noches (viernes a domingo)
                  </label>
                  <label class="choice-label" style="font-weight:600;">
                    <input type="radio" name="double_nights" value="1n"> 1 noche
                  </label>
                </div>
              </div>
            </div>

            <!-- Habitaci√≥n triple -->
            <div style="margin-top:0.8rem; margin-bottom:0.6rem;">
              <div style="display:flex;align-items:center;gap:0.75rem;">
                <div style="flex:0 0 auto;">
                  <strong>üõè Habitaci√≥n triple (3 personas)</strong>
                </div>
                <div style="flex:1 1 auto;"></div>
              </div>

              <div class="choices" style="margin-top:0.5rem;">
                <label class="choice-label">
                  <input type="radio" name="roomType" value="triple"> Seleccionar habitaci√≥n triple
                </label>
              </div>

              <div style="margin-top:0.5rem;">
                <div class="option-prices">
                  <div><strong>2 noches (viernes a domingo)</strong> ‚Äî Precio total por habitaci√≥n: 248 ‚Ç¨ (Precio por persona y noche: 41,33 ‚Ç¨)</div>
                </div>

                <div style="margin-top:0.5rem;" aria-hidden="true">
                  <label class="choice-label" style="font-weight:600;">
                    <input type="radio" name="triple_nights" value="2n" checked> 2 noches (viernes a domingo)
                  </label>
                </div>
              </div>
            </div>

            <!-- Suplementos opcionales -->
            <div style="margin-top:0.6rem;">
              <div style="font-weight:700; margin-bottom:0.4rem;">Suplementos opcionales (por habitaci√≥n y noche)</div>
              <div class="supplements">
                <label class="supplement-label">
                  <input type="checkbox" name="supplement_junior" value="junior"> Junior Suite ‚Üí + 32 ‚Ç¨ / noche
                </label>
                <label class="supplement-label">
                  <input type="checkbox" name="supplement_suite" value="suite"> Suite ‚Üí + 42 ‚Ç¨ / noche
                </label>
              </div>
            </div>

            <!-- Informaci√≥n adicional / comentarios -->
            <div style="margin-top:0.8rem;">
              <label for="comments" style="font-weight:700; display:block; margin-bottom:0.3rem;">üìù Comentarios o necesidades especiales (cuna, dudas, etc)</label>
              <textarea id="comments" name="comments" placeholder="Escribe aqu√≠‚Ä¶"></textarea>
            </div>
          </fieldset>

          <div class="form-actions" style="margin-top:1rem;">
            <button type="submit" class="btn-primary" aria-label="Enviar preferencia de alojamiento">Enviar</button>
            <div id="lodgingStatus" role="status" aria-live="polite" style="margin-top:0.25rem;"></div>
          </div>
        </form>
      </div>
    </section>

    <!-- Otras opciones de alojamiento (informativas) -->
    <section class="card" aria-labelledby="other-heading">
      <h2 id="other-heading" style="margin-top:0;">Otras opciones</h2>
      <p style="margin-top:0.4rem;">Si no dese√°is alojaros en el hotel reservado, hay otras alternativas cercanas:</p>

      <div style="margin-top:0.8rem;">
        <h3 style="margin:0 0 0.3rem 0;">Casa Rural La Ribera</h3>
        <p style="margin:0 0 0.4rem 0;">Direcci√≥n: C/ R√≠o. Ideal para grupos peque√±os.</p>

        <h3 style="margin:0 0 0.3rem 0;">Hostal La Plaza</h3>
        <p style="margin:0 0 0.4rem 0;">Direcci√≥n: Plaza Mayor. Opci√≥n c√©ntrica y econ√≥mica.</p>
      </div>
    </section>

  </main>

  <footer class="footer" role="contentinfo">√Ålvaro & Silvia ¬∑ 30/05/2026</footer>

  <script>
    (function () {
      // Mostrar/ocultar opciones de habitaci√≥n seg√∫n respuesta willStay
      const form = document.getElementById('lodgingForm');
      const willStayRadios = Array.from(form.elements['willStay'] || []);
      const roomOptions = document.getElementById('roomOptions');
      const submitBtn = form.querySelector('button[type="submit"]');
      const statusEl = document.getElementById('lodgingStatus');

      function updateRoomOptionsVisibility() {
        const val = willStayRadios.find(r => r.checked)?.value;
        if (val === 'si') {
          roomOptions.classList.remove('is-hidden');
          roomOptions.setAttribute('aria-hidden', 'false');
          // make some fields required if needed
          // e.g. require selection of roomType
          const roomTypeInputs = Array.from(form.elements['roomType'] || []);
          roomTypeInputs.forEach(i => i.required = true);
        } else {
          roomOptions.classList.add('is-hidden');
          roomOptions.setAttribute('aria-hidden', 'true');
          const roomTypeInputs = Array.from(form.elements['roomType'] || []);
          roomTypeInputs.forEach(i => i.required = false);
        }
      }

      updateRoomOptionsVisibility();
      willStayRadios.forEach(r => r.addEventListener('change', updateRoomOptionsVisibility));

      // Submit via fetch to Formspree so we can show a friendly confirmation below
      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        statusEl.textContent = '';

        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        const action = form.action;
        const data = new FormData(form);

        try {
          submitBtn.disabled = true;
          submitBtn.setAttribute('aria-busy', 'true');

          const resp = await fetch(action, {
            method: 'POST',
            body: data,
            headers: { 'Accept': 'application/json' }
          });

          if (resp.ok) {
            // show a confirmation message (no green box) with subtle animation
            statusEl.innerHTML = '<div class="rsvp-message" id="lodgingMessage">Gracias ‚Äî hemos recibido vuestra preferencia de alojamiento.</div>';
            const msg = document.getElementById('lodgingMessage');
            requestAnimationFrame(() => requestAnimationFrame(() => msg.classList.add('show')));
            form.reset();
            updateRoomOptionsVisibility();
          } else {
            const json = await resp.json().catch(()=>null);
            let err = 'Error al enviar. Intenta de nuevo.';
            if (json && json.error) err = json.error;
            statusEl.innerHTML = '<div class="form-note" style="color:#b33;">'+err+'</div>';
            submitBtn.disabled = false;
            submitBtn.removeAttribute('aria-busy');
          }
        } catch (err) {
          statusEl.innerHTML = '<div class="form-note" style="color:#b33;">Error de conexi√≥n. Intenta m√°s tarde.</div>';
          submitBtn.disabled = false;
          submitBtn.removeAttribute('aria-busy');
        }
      });
    })();
  </script>
</body>
</html>
